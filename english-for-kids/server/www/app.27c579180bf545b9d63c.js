(()=>{"use strict";var t={6020:(t,e,a)=>{a.r(e)},3129:(t,e,a)=>{a.r(e)},8732:(t,e,a)=>{a.r(e)},2236:(t,e,a)=>{a.r(e)},3181:(t,e,a)=>{a.r(e)},5720:(t,e,a)=>{a.r(e)},6130:(t,e,a)=>{a.r(e)},9194:(t,e,a)=>{a.r(e)},8226:(t,e,a)=>{a.r(e)},7119:(t,e,a)=>{a.r(e)},1280:(t,e,a)=>{a.r(e)},6812:(t,e,a)=>{a.r(e)},5080:(t,e,a)=>{a.r(e)},7903:(t,e,a)=>{a.r(e)},6245:(t,e,a)=>{a.r(e)},3298:(t,e,a)=>{a.r(e)},3850:(t,e,a)=>{a.r(e)},9941:(t,e,a)=>{a.r(e)},3897:(t,e,a)=>{a.r(e)},8147:(t,e,a)=>{a.r(e)},5528:(t,e,a)=>{a.r(e)},603:(t,e,a)=>{a.r(e)},2391:(t,e,a)=>{a.r(e)},1223:(t,e,a)=>{a.r(e)},8796:(t,e,a)=>{a.r(e)},1107:(t,e,a)=>{a.r(e)},744:(t,e,a)=>{a.r(e)},2183:(t,e,a)=>{a.r(e)},3833:(t,e,a)=>{a.r(e)},6083:(t,e,a)=>{a.r(e)},8141:(t,e,a)=>{a.r(e)},7081:(t,e,a)=>{a.r(e)},173:(t,e,a)=>{a.r(e)},1731:(t,e,a)=>{a.r(e)},5373:(t,e,a)=>{a.r(e)},8676:(t,e,a)=>{function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}a.r(e),a.d(e,{__DO_NOT_USE__ActionTypes:()=>l,applyMiddleware:()=>E,bindActionCreators:()=>f,combineReducers:()=>h,compose:()=>p,createStore:()=>u});var o="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function c(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function u(t,e,a){var r;if("function"==typeof e&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof e&&void 0===a&&(a=e,e=void 0),void 0!==a){if("function"!=typeof a)throw new Error(s(1));return a(u)(t,e)}if("function"!=typeof t)throw new Error(s(2));var i=t,n=e,d=[],h=d,_=!1;function f(){h===d&&(h=d.slice())}function p(){if(_)throw new Error(s(3));return n}function E(t){if("function"!=typeof t)throw new Error(s(4));if(_)throw new Error(s(5));var e=!0;return f(),h.push(t),function(){if(e){if(_)throw new Error(s(6));e=!1,f();var a=h.indexOf(t);h.splice(a,1),d=null}}}function m(t){if(!c(t))throw new Error(s(7));if(void 0===t.type)throw new Error(s(8));if(_)throw new Error(s(9));try{_=!0,n=i(n,t)}finally{_=!1}for(var e=d=h,a=0;a<e.length;a++)(0,e[a])();return t}function g(t){if("function"!=typeof t)throw new Error(s(10));i=t,m({type:l.REPLACE})}function A(){var t,e=E;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(s(11));function a(){t.next&&t.next(p())}return a(),{unsubscribe:e(a)}}})[o]=function(){return this},t}return m({type:l.INIT}),(r={dispatch:m,subscribe:E,getState:p,replaceReducer:g})[o]=A,r}function h(t){for(var e=Object.keys(t),a={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(a[i]=t[i])}var n,o=Object.keys(a);try{!function(t){Object.keys(t).forEach((function(e){var a=t[e];if(void 0===a(void 0,{type:l.INIT}))throw new Error(s(12));if(void 0===a(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))}))}(a)}catch(t){n=t}return function(t,e){if(void 0===t&&(t={}),n)throw n;for(var r=!1,i={},d=0;d<o.length;d++){var l=o[d],c=a[l],u=t[l],h=c(u,e);if(void 0===h)throw e&&e.type,new Error(s(14));i[l]=h,r=r||h!==u}return(r=r||o.length!==Object.keys(t).length)?i:t}}function _(t,e){return function(){return e(t.apply(this,arguments))}}function f(t,e){if("function"==typeof t)return _(t,e);if("object"!=typeof t||null===t)throw new Error(s(16));var a={};for(var r in t){var i=t[r];"function"==typeof i&&(a[r]=_(i,e))}return a}function p(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function E(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(t){return function(){var a=t.apply(void 0,arguments),r=function(){throw new Error(s(15))},i={getState:a.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return r=p.apply(void 0,o)(a.dispatch),n(n({},a),{},{dispatch:r})}}}},6752:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(a(3242)),s=i(a(9840)),o=i(a(4977)),d=i(a(2e3)),l=i(a(4584)),c=i(a(1582)),u=i(a(3542)),h=i(a(982)),_=i(a(8397)),f=i(a(952)),p=i(a(1796)),E=i(a(6574)),m=i(a(2735)),g=i(a(4680)),A=a(5601);class C{constructor(t){this.rootEl=t,this.mainEl=m.default("main",["main","page__main"]),this.loginPopup=new c.default,this.homePage=new u.default(this.mainEl),this.categoryPage=new h.default(this.mainEl),this.statisticPage=new _.default(this.mainEl),this.adminHomePage=new f.default(this.mainEl),this.adminCategoryPage=new p.default(this.mainEl),this.gameEndSplashScreenSuccess=new E.default(["game-end-splash-screen-success"],A.GAME_END_SPLASH_SCREEN.success),this.gameEndSplashScreenFail=new E.default(["game-end-splash-screen-fail"],A.GAME_END_SPLASH_SCREEN.fail),C.checkAdminAuth(),this.initStateApp(),this.render()}render(){this.rootEl.append(o.default.el,this.mainEl,d.default.el)}renderUserPart(){this.rootEl.append(l.default.el,this.loginPopup.el)}renderAdminPart(){l.default.el.remove(),this.loginPopup.el.remove()}static checkAdminAuth(){localStorage.getItem("authToken")&&s.default.dispatch({type:A.APP_AUTHORIZATION,isAdmin:!0})}addRoutes(){n.default.add(/^category\/(.*)/,(t=>this.renderCategoryPage(t))).add("statistic",(()=>this.renderStatisticPage())).add(/admin\/category\/(.*)/,(t=>this.renderAdminCategoryPage(t))).add("admin",(()=>this.renderAdminHomePage())).add("",(()=>this.renderHomePage()))}renderCategoryPage(t){this.clearMainEl(),C.redirectAdmin()||(C.resetPageName(),document.body.classList.add("category-page"),C.resetStateNavItems(),C.findHighlightNavItem(t[0]),s.default.dispatch({type:A.APP_PAGE_CHANGE,currentPage:A.APP_PAGES.category,category:t[1]}),this.categoryPage.render(t[1]))}renderStatisticPage(){this.clearMainEl(),C.redirectAdmin()||(C.resetPageName(),document.body.classList.add("statistic-page"),C.resetStateNavItems(),C.highlightNavItem(l.default.navItems.length-1),s.default.dispatch({type:A.APP_PAGE_CHANGE,currentPage:A.APP_PAGES.statistic}),this.statisticPage.render())}renderAdminCategoryPage(t){this.clearMainEl(),C.redirectUser()||(C.resetPageName(),document.body.classList.add("admin-category-page"),s.default.dispatch({type:A.APP_PAGE_CHANGE,currentPage:A.APP_PAGES.adminCategory,category:t[1]}),this.adminCategoryPage.render(t[1]))}renderAdminHomePage(){this.clearMainEl(),C.redirectUser()||(C.resetPageName(),document.body.classList.add("admin-home-page"),s.default.dispatch({type:A.APP_PAGE_CHANGE,currentPage:A.APP_PAGES.adminHome}),this.adminHomePage.render())}renderHomePage(){return r(this,void 0,void 0,(function*(){this.clearMainEl(),C.redirectAdmin()||(s.default.getState().isLogInOutDone&&(yield l.default.render()),C.resetPageName(),document.body.classList.add("home-page"),C.resetStateNavItems(),C.highlightNavItem(0),s.default.dispatch({type:A.APP_PAGE_CHANGE,currentPage:A.APP_PAGES.home}),this.homePage.render())}))}static redirectAdmin(){return!!s.default.getState().isAdmin&&(n.default.navigate("admin"),!0)}static redirectUser(){return!s.default.getState().isAdmin&&(n.default.navigate("/"),!0)}clearMainEl(){this.mainEl.innerHTML=""}static resetPageName(){document.body.classList.forEach((t=>{/.+-page$/.test(t)&&document.body.classList.remove(t)}))}static resetStateNavItems(){l.default.navItems.forEach((t=>t.classList.remove(A.NAV_ITEM_ACTIVE_CLASS)))}static findHighlightNavItem(t){const e=l.default.navItems.findIndex((e=>e.children[0].pathname.indexOf(t)+1));e>=0&&C.highlightNavItem(e)}static highlightNavItem(t){l.default.navItems[t].classList.add(A.NAV_ITEM_ACTIVE_CLASS)}initStateApp(){this.changeStateApp(),s.default.subscribe(this.changeStateApp.bind(this)),this.logInOutDone()}changeStateApp(){const t=s.default.getState();t.isLogInOutDone?this.logInOutDone():t.gameMode===A.TRAIN?(document.body.classList.remove("game-mode-play"),document.body.classList.add("game-mode-train")):(document.body.classList.remove("game-mode-train"),document.body.classList.add("game-mode-play"),t.isEndGame&&(t.countErrors?this.showMistakesGameEnd():this.showCongratulationsGameEnd()))}logInOutDone(){s.default.getState().isAdmin?(o.default.changeView(!0),this.renderAdminPart(),document.body.classList.remove("game-mode-play"),document.body.classList.remove("game-mode-train")):(o.default.changeView(),this.renderUserPart())}showCongratulationsGameEnd(){this.showSplashScreenGameEnd(this.gameEndSplashScreenSuccess)}showMistakesGameEnd(){const t=`${s.default.getState().countErrors} ${A.GAME_END_SPLASH_SCREEN.fail.text}`;this.gameEndSplashScreenFail.changeTitleText(t),this.showSplashScreenGameEnd(this.gameEndSplashScreenFail)}showSplashScreenGameEnd(t){return r(this,void 0,void 0,(function*(){this.rootEl.append(t.el),yield g.default(1e3),t.show(),yield g.default(4e3),s.default.dispatch({type:A.GAME_END}),n.default.navigate(""),t.hide(),yield g.default(1e3),t.el.remove()}))}}e.default=C},9452:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(6020);const i=r(a(8194)),n=r(a(1547)),s=r(a(6311)),o=r(a(2735));class d extends i.default{constructor(t){super("form",t.formClasses.concat(["admin-category-card-form"])),this.label=o.default("label",["admin-category-card-form__label"]),this.field=new n.default({classes:["admin-category-card-form__field"],type:"text",name:"name",maxlength:"30"}),this.btnCancel=new s.default({classes:t.btnClasses.concat(["admin-category-card-form__btn-cancel",t.btnCancelClass]),text:"Cancel"}),this.btnAct=new s.default({classes:t.btnClasses.concat(["admin-category-card-form__btn-act",t.btnActClass]),text:t.btnActText}),this.render(t)}render(t){this.el.setAttribute("action",t.formAction),this.el.setAttribute("method",t.formMethod),this.label.textContent="Category Name:",t.inputValue&&this.field.setValue(t.inputValue),this.el.append(this.label,this.field.el,this.btnCancel.el,this.btnAct.el)}}e.default=d},5107:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3129);const i=r(a(8194)),n=r(a(6311)),s=r(a(8390)),o=r(a(9452)),d=r(a(2735)),l=r(a(3242)),c=a(5601);class u extends i.default{constructor(t){super("div",["admin-category-card"]),this.categoryName=t.handle,this.containerEl=d.default("div",["admin-category-card__container"]),this.btnRemove=new n.default({classes:["admin-category-card__remove"]}),this.titleEl=d.default("h4",["admin-category-card__title"]),this.amountWordsEl=d.default("span",["admin-category-card__amount-words"]),this.btnUpdate=new n.default({classes:["admin-category-card__btn","admin-category-card__btn-update"],text:"Update"}),this.linkToWord=new s.default({classes:["admin-category-card__btn","admin-category-card__link-to-word"],url:t.handle,text:"Add word"}),this.adminCategoryCardForm=new o.default({formClasses:["admin-category-card__form-update","admin-category-card-form_hidden"],formAction:c.SERVER_API_CATEGORY_URL,formMethod:"PATCH",inputValue:t.title,btnClasses:["admin-category-card__btn"],btnCancelClass:"admin-category-card__btn-cancel-update",btnActClass:"admin-category-card__btn-save-update",btnActText:"Save"}),this.build(t)}build(t){this.titleEl.textContent=t.title,this.amountWordsEl.textContent="Words:",this.amountWordsEl.dataset.amountWords=String(t.amountWords),this.el.append(this.btnRemove.el,this.containerEl,this.adminCategoryCardForm.el),this.containerEl.append(this.titleEl,this.amountWordsEl,this.btnUpdate.el,this.linkToWord.el),this.linkToWord.attachHandler((t=>{null==t||t.preventDefault(),l.default.navigate(`admin/category/${this.categoryName}`)}))}}e.default=u},1796:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(8732);const n=i(a(2085)),s=i(a(2735)),o=i(a(9840)),d=i(a(2003)),l=a(5601);class c{constructor(t){this.rootEl=t,this.titleNameEl=s.default("span",["admin-category-page__title-name"]),this.adminWordsField=new n.default}render(t){return r(this,void 0,void 0,(function*(){this.adminWordsField.clear(),this.titleNameEl.textContent=t,this.adjustTitle();const{category:e}=o.default.getState(),a=yield c.getCategoryCardsData(e);this.adminWordsField.addCards(a),this.rootEl.append(this.adminWordsField.el)}))}static getCategoryCardsData(t){return r(this,void 0,void 0,(function*(){const e=yield d.default(l.SERVER_API_CATEGORIES_URL);return(yield d.default(l.SERVER_API_WORDS_URL))[e.findIndex((e=>e.handle===t))]}))}adjustTitle(){const t=s.default("div",["admin-category-page__title"]),e=s.default("span",["admin-category-page__title-text"]);e.textContent="Category:",this.rootEl.append(t),t.append(e,this.titleNameEl)}}e.default=c},952:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(2236);const n=i(a(8581)),s=i(a(5107)),o=i(a(4362)),d=i(a(2003)),l=i(a(3479)),c=a(5601),u=i(a(8063));class h{constructor(t){this.rootEl=t,this.categoriesField=new n.default(["admin-home-page__categories-field"]),this.newCard=new o.default(["admin-home-page__new-card"],"Create new Category"),this.attachListeners()}render(){this.addCategories(),this.rootEl.append(this.categoriesField.el)}addCategories(){return r(this,void 0,void 0,(function*(){this.categoriesField.clear();const t=(yield d.default(c.SERVER_API_CATEGORIES_URL)).map((t=>new s.default(t)));t.push(this.newCard),this.categoriesField.addCards(t)}))}attachListeners(){this.categoriesField.el.addEventListener("click",(t=>this.attachHandler(t))),this.categoriesField.el.addEventListener("keydown",(t=>this.handleSendUpdatingCategoryName(t)))}handleSendUpdatingCategoryName(t){var e,a;const r=l.default(t.target,".admin-category-card-form__field .field__input",this.categoriesField.el);r&&"Enter"===t.code&&(t.preventDefault(),null===(a=null===(e=null==r?void 0:r.closest(".admin-category-card-form"))||void 0===e?void 0:e.querySelector(".admin-category-card__btn-save-update"))||void 0===a||a.click())}attachHandler(t){let e=this.getCard(t,".admin-category-card__remove");e?this.removeCategory(e):(e=this.getCard(t,".admin-category-card__btn-update"),e?h.showFormUpdate(e):(e=this.getCard(t,".admin-category-card__btn-cancel-update"),e?h.hideFormUpdate(e):(e=this.getCard(t,".admin-category-card__btn-save-update"),e&&h.updateCategory(e))))}getCard(t,e){const a=l.default(t.target,e,this.categoriesField.el);if(a){const t=a.closest(".admin-category-card");return this.categoriesField.cards.find((e=>e.el===t))}}removeCategory(t){return r(this,void 0,void 0,(function*(){if((yield fetch(`${c.SERVER_API_CATEGORY_URL}/${t.categoryName}`,{method:"DELETE"})).ok){t.el.remove();const e=this.categoriesField.cards.findIndex((e=>e===t));this.categoriesField.cards.splice(e,1)}}))}static showFormUpdate(t){t.containerEl.classList.add("admin-category-card__container_hidden"),t.adminCategoryCardForm.el.classList.remove("admin-category-card-form_hidden")}static hideFormUpdate(t){t.adminCategoryCardForm.el.classList.add("admin-category-card-form_hidden"),t.containerEl.classList.remove("admin-category-card__container_hidden")}static updateCategory(t){return r(this,void 0,void 0,(function*(){const e=t.adminCategoryCardForm.field.getValue();if(e===t.titleEl.textContent)return;const a={handle:u.default(e),title:e};(yield fetch(`${c.SERVER_API_CATEGORY_URL}/${t.categoryName}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(t.titleEl.textContent=a.title,t.linkToWord.el.href=t.linkToWord.el.href.replace(t.categoryName,a.handle),t.categoryName=a.handle,h.hideFormUpdate(t))}))}}e.default=h},7873:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3181);const i=r(a(8194)),n=r(a(8390)),s=r(a(6311)),o=r(a(2735)),d=r(a(3242)),l=r(a(9840)),c=a(5601);class u extends i.default{constructor(){super("nav",["admin-nav"]),this.navItems=[],this.containerEl=o.default("ul",["admin-nav__container"]),this.logout=new s.default({classes:["admin-nav__logout"],text:c.LOGOUT_BTN_TEXT}),this.render()}render(){c.ADMIN_NAV_ITEMS.forEach((t=>this.addNavItem(t))),this.logout.attachHandler(u.handleLogout.bind(this)),this.el.append(this.containerEl,this.logout.el)}addNavItem({url:t,text:e}){const a=o.default("li",["admin-nav__item"]),r=new n.default({classes:["admin-nav__link"],url:t,text:e});r.attachHandler((e=>{null==e||e.preventDefault(),d.default.navigate(t)})),this.containerEl.append(a),a.append(r.el),this.navItems.push(a)}static handleLogout(){localStorage.removeItem("authToken"),l.default.dispatch({type:c.APP_AUTHORIZATION,isAdmin:!1}),d.default.navigate("/")}}const h=new u;e.default=h},7671:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(5720);const i=r(a(8194)),n=r(a(6311)),s=r(a(2735));class o extends i.default{constructor(t){super("div",["admin-word-card"]),this.containerEl=s.default("div",["admin-word-card__container"]),this.removeEl=s.default("span",["admin-word-card__remove"]),this.wordEl=s.default("span",["admin-word-card__word"]),this.translationEl=s.default("span",["admin-word-card__translation"]),this.audioNameEl=s.default("span",["admin-word-card__audio"]),this.audioFileEl=new Audio(t.audio),this.imageEl=s.default("img",["admin-word-card__img"]),this.btnChange=new n.default({classes:["admin-word-card__btn","admin-word-card__btn-change"],text:"Change"}),this.render(t)}render(t){this.wordEl.textContent=t.word,this.createRow("Word:",this.wordEl),this.translationEl.textContent=t.translation,this.createRow("Translation:",this.translationEl);const e=t.audio.split("/");this.audioNameEl.textContent=e[e.length-1],this.createRow("Sound file:",this.audioNameEl),this.imageEl.setAttribute("src",t.image),this.createRow("Image:",this.imageEl),this.el.append(this.containerEl),this.containerEl.prepend(this.removeEl),this.containerEl.append(this.btnChange.el)}createRow(t,e){const a=s.default("div",["admin-word-card__block"]),r=s.default("span",["admin-word-card__subtitle"]);r.textContent=t,e.classList.add("admin-word-card__value"),this.containerEl.append(a),a.append(r,e)}playAudio(){this.audioFileEl.play()}}e.default=o},2085:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(6130);const i=r(a(8194)),n=r(a(7671)),s=r(a(4362));class o extends i.default{constructor(){super("div",["admin-words-field"]),this.cards=[],this.newCard=new s.default(["admin-words-field__new-card"],"Add new word")}clear(){this.cards=[],this.el.innerHTML=""}addCards(t){t.forEach((t=>{const e=new n.default(t);this.cards.push(e),this.el.append(e.el)})),this.cards.push(this.newCard),this.el.append(this.newCard.el)}}e.default=o},8194:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="div",e=[]){this.el=document.createElement(t),this.el.classList.add(...e)}}},6311:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(9194);const i=r(a(8194));class n extends i.default{constructor(t){super("button",t.classes.concat(["btn"])),this.render(t)}render({text:t,type:e="button",title:a}){t&&(this.el.textContent=t),a&&(this.el.title=a),this.el.setAttribute("type",e)}attachHandler(t){this.el.addEventListener("click",t)}}e.default=n},1547:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(8226);const i=r(a(8194)),n=r(a(2735));class s extends i.default{constructor(t){super("div",t.classes.concat(["field"])),this.input=n.default("input",["field__input"]),this.render(t)}render(t){if(this.input.setAttribute("type",t.type),this.input.setAttribute("name",t.name),this.input.setAttribute("maxlength",t.maxlength),t.placeholder&&this.input.setAttribute("placeholder",t.placeholder),t.value&&this.input.setAttribute("value",t.value),t.required&&this.input.setAttribute("required",""),t.pattern){const e=t.pattern.toString(),a=e.substring(1,e.length-1);this.input.setAttribute("pattern",a)}this.el.append(this.input)}setValue(t){this.input.setAttribute("value",t)}getValue(){return this.input.value}}e.default=s},8390:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(7119);const i=r(a(8194));class n extends i.default{constructor(t){super("a",t.classes.concat(["link"])),this.render(t)}render({url:t,text:e,target:a}){this.el.setAttribute("href",t),e&&(this.el.textContent=e),a&&this.el.setAttribute("target",a)}attachHandler(t){this.el.addEventListener("click",t)}}e.default=n},64:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(1280);const i=r(a(8194)),n=r(a(2735));class s extends i.default{constructor(t,e,a="popup_hidden"){super("div",t.concat(["popup",a])),this.hiddenClass=a,this.containerEl=n.default("div",["popup__container",e]),this.attachListeners(),this.build()}build(){this.el.append(this.containerEl)}attachListeners(){this.el.addEventListener("click",(t=>this.checkClickIsOutside(t)))}checkClickIsOutside(t){t.target===this.el&&this.hidePopup()}showPopup(){this.el.classList.remove(this.hiddenClass)}hidePopup(){this.el.classList.add(this.hiddenClass)}}e.default=s},7534:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=a(5601);e.default=function(t=r.INITIAL_STATE,e){var a;switch(e.type){case r.APP_AUTHORIZATION:return Object.assign(Object.assign({},t),{isAdmin:e.isAdmin||!1,isLogInOutDone:!0});case r.APP_PAGE_CHANGE:return Object.assign(Object.assign({},t),{isLogInOutDone:!1,currentPage:e.currentPage||"",category:e.category||"",isPageChange:!0,isGameStart:!1,isCardCorrect:!1,isCardError:!1});case r.GAME_MODE_CHANGE:return Object.assign(Object.assign({},t),{isPageChange:!1,gameMode:e.gameMode||"",isGameStart:!1});case r.GAME_START:return Object.assign(Object.assign({},t),{isPageChange:!1,isGameStart:!0,isEndGame:!1,randomCards:e.randomCards||[],currentCardIndex:e.currentCardIndex||0,isCardCorrect:!1,isCardError:!1,countErrors:0});case r.GAME_END:return Object.assign(Object.assign({},t),{isPageChange:!0,isGameStart:!1,isEndGame:!1,isCardCorrect:!1,isCardError:!1});case r.GAME_CARD_CORRECT:{const e=t.randomCards.slice();e.pop();let a=!1;return e.length||(a=!0),Object.assign(Object.assign({},t),{isEndGame:a,randomCards:e,currentCardIndex:e[e.length-1],isCardCorrect:!0,isCardError:!1})}case r.GAME_CARD_ERROR:return Object.assign(Object.assign({},t),{isCardCorrect:!1,isCardError:!0,countErrors:t.countErrors+1});case r.APP_DIFFICULT_CATEGORY:{const r=(null===(a=e.difficultWords)||void 0===a?void 0:a.slice())||[];return Object.assign(Object.assign({},t),{difficultWords:r})}default:return t}}},3242:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class a{constructor({mode:t,root:e}){this.routes=[],this.root="/",this.mode="history",this.curPage=void 0,t&&(this.mode=t),e&&(this.root=e),this.listen()}add(t,e){return this.routes.push({path:t,callback:e}),this}remove(t){const e=this.routes.findIndex((e=>e.path===t));return e+1&&this.routes.splice(e,1),this}flush(){this.routes=[]}static clearSlashes(t){return t.replace(/^\/|\/$/g,"")}getPageName(){let t="";if("history"===this.mode)t=decodeURI(window.location.pathname),"/"!==this.root&&(t=t.replace(this.root,""));else{const e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return a.clearSlashes(t)}navigate(t=""){return"history"===this.mode?window.history.pushState(null,"",this.root+t):window.location.href=`${window.location.href.replace(/#(.*)$/,"")}#${t}`,this}listen(){setInterval(a.interval,50,this)}static interval(t){const e=t.getPageName();t.curPage!==e&&(t.curPage=e,t.routes.some((e=>{var a;const r=null===(a=t.curPage)||void 0===a?void 0:a.match(e.path);return!!r&&(e.callback(r),!0)})))}}const r=new a({mode:"hash"});e.default=r},9840:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=a(8676),n=r(a(7534)),s=i.createStore(n.default);e.default=s},1556:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(6812);const i=r(a(6311)),n=r(a(9840)),s=a(5601);class o extends i.default{constructor(t){super({classes:t.concat(["btn-start-game"]),text:s.BTN_START_GAME_TEXT}),this.subscribeToChangeAppState()}subscribeToChangeAppState(){n.default.subscribe(this.resetToDefault.bind(this))}resetToDefault(){const t=n.default.getState();(t.gameMode===s.TRAIN||t.isPageChange)&&this.el.classList.remove("btn-start-game_repeat")}attachHandlerStartGame(t){this.attachHandler((()=>t()))}changeView(){this.el.classList.add("btn-start-game_repeat")}}e.default=o},7610:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(5080);const i=r(a(8194)),n=r(a(6300)),s=r(a(9840)),o=r(a(1739)),d=r(a(3479)),l=r(a(2012)),c=a(5601);class u extends i.default{constructor(){super("div",["cards-field"]),this.cards=[],this.audioCorrect=o.default(c.GAME_CARDS_SOUND_NOTICES.correct.folder,c.GAME_CARDS_SOUND_NOTICES.correct.audio),this.audioError=o.default(c.GAME_CARDS_SOUND_NOTICES.error.folder,c.GAME_CARDS_SOUND_NOTICES.error.audio),this.attachListener()}attachListener(){this.el.addEventListener("click",(t=>{const e=s.default.getState();e.gameMode===c.TRAIN?this.trainCard(t):e.isGameStart&&this.checkCard(t)}))}trainCard(t){let e=this.getCard(t,".word-card__rotate");e?(e.trainCard(),u.updateGameStatisticInStorage(e,"trained")):(e=this.getCard(t,".word-card__front"),e&&!e.isFlipped&&(e.playAudio(),u.updateGameStatisticInStorage(e,"trained")))}checkCard(t){const e=this.getCard(t,".word-card");if(e){const t=s.default.getState(),a=this.cards[t.currentCardIndex];a===e?this.execActionsCorrectCard(a):this.execActionsWrongCard(a)}}execActionsCorrectCard(t){this.audioCorrect.play(),t.disableCard(),s.default.dispatch({type:c.GAME_CARD_CORRECT}),u.updateGameStatisticInStorage(t,"correct")}execActionsWrongCard(t){this.audioError.play(),s.default.dispatch({type:c.GAME_CARD_ERROR}),u.updateGameStatisticInStorage(t,"wrong")}getCard(t,e){const a=d.default(t.target,e,this.el);if(a){const t=a.closest(".word-card");return this.cards.find((e=>e.el===t))}}static updateGameStatisticInStorage(t,e){const{category:a}=t.frontEl.dataset,r=t.wordEnEl.textContent;if(!r||!a)return;const i=`${a}__${r}`,n=l.default(a,r),s=u.updateStatisticData(n,e);localStorage.setItem(i,JSON.stringify(s))}static updateStatisticData(t,e){const a=Object.assign({},t);switch(e){case"trained":a.trained++;break;case"correct":a.correct++;break;case"wrong":a.wrong++}return a}clear(){this.cards=[],this.el.innerHTML=""}addCards(t,e){t.forEach((t=>this.addCard(t,e)))}addCard(t,e){const a=new n.default(t,e);this.cards.push(a),this.el.append(a.el)}}e.default=u},8581:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(7903);const i=r(a(8194));class n extends i.default{constructor(t=[]){super("div",t.concat(["categories-field"])),this.cards=[]}clear(){this.cards=[],this.el.innerHTML=""}addCards(t){this.cards=t,this.cards.forEach((t=>this.el.append(t.el)))}}e.default=n},2381:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(6245);const i=r(a(8390)),n=r(a(2735)),s=r(a(3242));class o extends i.default{constructor(t){super({classes:["category-card"],url:t.handle}),this.imageEl=n.default("img",["category-card__img"]),this.titleEl=n.default("h4",["category-card__title"]),this.build(t)}build({handle:t,title:e,image:a,alt:r}){this.imageEl.setAttribute("src",a),this.imageEl.setAttribute("alt",r),this.titleEl.textContent=e,this.el.append(this.imageEl,this.titleEl),this.attachHandler((e=>{null==e||e.preventDefault(),s.default.navigate(`category/${t}`)}))}}e.default=o},982:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3298);const n=i(a(1364)),s=i(a(7610)),o=i(a(1556)),d=i(a(2735)),l=i(a(9840)),c=i(a(4680)),u=i(a(8063)),h=i(a(2003)),_=a(5601);class f{constructor(t){this.rootEl=t,this.titleEl=d.default("h2",["category-page__title"]),this.gameScore=new n.default(["category-page__game-score"]),this.cardsField=new s.default,this.btnStartGame=new o.default(["category-page__btn-start"]),this.subscribeToChangeAppState(),this.addHandlerStartGame()}render(t){return r(this,void 0,void 0,(function*(){this.cardsField.clear(),this.titleEl.textContent=t;const e=l.default.getState(),{category:a}=e;if(a!==_.STATISTIC_PAGE_URL){const t=yield f.getCategoryCardsData(a);if(!t)return;this.cardsField.addCards(t,a)}else this.handleDifficultWordsCategory(e);this.rootEl.append(this.titleEl,this.gameScore.el,this.cardsField.el,this.btnStartGame.el)}))}static getCategoryCardsData(t){return r(this,void 0,void 0,(function*(){const e=yield h.default(_.SERVER_API_CATEGORIES_URL);return(yield h.default(_.SERVER_API_WORDS_URL))[e.findIndex((e=>e.handle===t))]}))}handleDifficultWordsCategory(t){const{difficultWords:e}=t;e.length&&e.forEach((t=>r(this,void 0,void 0,(function*(){const e=u.default(t.category),a=yield f.getCategoryCardsData(e);if(!a)return;const r=a.find((e=>e.word===t.word));r&&this.cardsField.addCard(r,e)}))))}subscribeToChangeAppState(){l.default.subscribe(this.changeStateApp.bind(this))}changeStateApp(){return r(this,void 0,void 0,(function*(){const t=l.default.getState();t.isCardCorrect&&!t.isEndGame?(this.gameScore.success(),yield c.default(500),this.playAudioCurrentCard()):t.isCardError?this.gameScore.error():(t.isEndGame||t.isPageChange)&&this.gameScore.reset()}))}playAudioCurrentCard(){const{currentCardIndex:t}=l.default.getState();this.cardsField.cards[t].playAudio()}addHandlerStartGame(){this.btnStartGame.attachHandlerStartGame((()=>{this.cardsField.cards.length&&(this.startGame(),this.playAudioCurrentCard())}))}startGame(){if(!l.default.getState().isGameStart){const t=this.createCardsRandomArray();this.btnStartGame.changeView(),l.default.dispatch({type:_.GAME_START,randomCards:t,currentCardIndex:t[t.length-1]})}}createCardsRandomArray(){const t=this.cardsField.cards.length,e=[...Array(t).keys()];return e.sort((()=>Math.random()-.5)),e}}e.default=f},2e3:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3850);const i=r(a(8194)),n=r(a(8390)),s=r(a(2735)),o=a(5601);class d extends i.default{constructor(){super("footer",["footer"]),this.containerEl=s.default("div",["footer__container"]),this.githubLinkEl=new n.default({classes:["footer__github"],url:o.MY_GITHUB.url,text:o.MY_GITHUB.name,target:"_blank"}),this.rssLinkEl=new n.default({classes:["footer__rsschool"],url:o.RSSCHOOL_JS_LINK,target:"_blank"}),this.rssYearEl=s.default("span",["footer__rsschool-year"]),this.render()}render(){this.rssYearEl.textContent=o.YEAR_CREATE_APP,this.el.append(this.containerEl),this.containerEl.append(this.githubLinkEl.el,this.rssLinkEl.el),this.rssLinkEl.el.append(this.rssYearEl)}}const l=new d;e.default=l},6574:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(9941);const i=r(a(8194)),n=r(a(2735));class s extends i.default{constructor(t=[],e){super("div",t.concat(["game-end-splash-screen","game-end-splash-screen_hidden"])),this.titleEl=n.default("p",["game-end-splash-screen__title"]),this.imageEl=n.default("img",["game-end-splash-screen__img"]),this.audioEl=new Audio(e.audio),this.render(e)}render(t){this.titleEl.textContent=t.text,this.imageEl.setAttribute("src",t.image),this.el.append(this.titleEl,this.imageEl)}changeTitleText(t){this.titleEl.textContent=t}show(){document.body.classList.add("game-end-splash-screen-show"),this.el.classList.remove("game-end-splash-screen_hidden"),this.audioEl.play()}hide(){document.body.classList.remove("game-end-splash-screen-show"),this.el.classList.add("game-end-splash-screen_hidden")}}e.default=s},1364:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3897);const i=r(a(8194)),n=r(a(2735));class s extends i.default{constructor(t=[]){super("div",t.concat(["game-score"]))}addStar(t){const e=n.default("span",["game-score__star",t]);this.el.append(e)}success(){this.addStar("game-score__star-success")}error(){this.addStar("game-score__star-error")}reset(){this.el.innerHTML=""}}e.default=s},7179:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(8147);const i=r(a(6311)),n=r(a(2735)),s=a(5601);class o extends i.default{constructor(){super({classes:["hamburger-menu"]}),this.itemTopEl=n.default("span",["hamburger-menu__item","hamburger-menu__item-top"]),this.itemMidEl=n.default("span",["hamburger-menu__item","hamburger-menu__item-mid"]),this.itemBotEl=n.default("span",["hamburger-menu__item","hamburger-menu__item-bot"]),this.build()}build(){this.el.append(this.itemTopEl,this.itemMidEl,this.itemBotEl),this.attachHandler((()=>document.body.classList.toggle(s.HAMB_MENU_OPEN_CLASS)))}}e.default=o},4977:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(5528);const i=r(a(8194)),n=r(a(2735)),s=r(a(7179)),o=r(a(7546)),d=r(a(7873));class l extends i.default{constructor(){super("header",["header"]),this.containerEl=n.default("div",["header__container"]),this.hamburgerMenu=new s.default,this.render()}render(){this.el.append(this.containerEl)}changeView(t=!1){this.containerEl.innerHTML="",t?this.renderAdminPart():this.renderUserPart()}renderUserPart(){document.body.classList.remove("admin-auth"),this.containerEl.append(this.hamburgerMenu.el,o.default.el)}renderAdminPart(){document.body.classList.add("admin-auth"),this.containerEl.append(d.default.el)}}const c=new l;e.default=c},3542:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(603);const n=i(a(8581)),s=i(a(2381)),o=i(a(2003)),d=a(5601);e.default=class{constructor(t){this.rootEl=t,this.categoriesField=new n.default}render(){this.addCategories(),this.rootEl.append(this.categoriesField.el)}addCategories(){return r(this,void 0,void 0,(function*(){this.categoriesField.clear();const t=(yield o.default(d.SERVER_API_CATEGORIES_URL)).map((t=>new s.default(t)));this.categoriesField.addCards(t)}))}}},3426:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(2391);const n=i(a(8194)),s=i(a(1547)),o=i(a(6311)),d=i(a(2735)),l=i(a(3242)),c=a(5601),u=i(a(9840));class h extends n.default{constructor(t=[],e){super("form",t.concat(["login-form"])),this.popup=e,this.username=new s.default(Object.assign(Object.assign({},c.LOGIN_FORM_USERNAME_FIELD),{classes:["login-form__field","login-form__username"]})),this.password=new s.default(Object.assign(Object.assign({},c.LOGIN_FORM_PASSWORD_FIELD),{classes:["login-form__field","login-form__password"]})),this.errorEl=d.default("p",["login-form__error","login-form__error_hidden"]),this.cancel=new o.default(Object.assign(Object.assign({},c.LOGIN_FORM_CANCEL_BTN),{classes:["btn","login-form__btn","login-form__cancel"]})),this.submit=new o.default(Object.assign(Object.assign({},c.LOGIN_FORM_SUBMIT_BTN),{classes:["btn","login-form__btn","login-form__submit"]})),this.attachListener(),this.render()}render(){this.el.setAttribute("action",`${c.SERVER_URL}/login`),this.el.setAttribute("method","post"),this.cancel.attachHandler(this.handleCancel.bind(this)),this.el.append(this.username.el,this.password.el,this.errorEl,this.cancel.el,this.submit.el)}attachListener(){this.el.addEventListener("submit",(t=>this.handleForm(t)))}handleCancel(){this.errorEl.classList.add("login-form__error_hidden")}handleForm(t){t.preventDefault(),this.authorization()}authorization(){return r(this,void 0,void 0,(function*(){const t=[...new FormData(this.el).entries()].map((t=>`${encodeURIComponent(t[0])}=${encodeURIComponent(t[1])}`)).join("&"),e=yield fetch(`${c.SERVER_URL}/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),a=yield e.json();"accessToken"in a?(this.errorEl.classList.add("login-form__error_hidden"),document.body.classList.remove(c.LOGIN_POPUP_SHOW_CLASS),l.default.navigate("admin/categories"),localStorage.setItem("authToken",a.accessToken),u.default.dispatch({type:c.APP_AUTHORIZATION,isAdmin:!0})):(this.errorEl.textContent=a.error,this.errorEl.classList.remove("login-form__error_hidden"))}))}}e.default=h},1582:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(1223);const i=r(a(64)),n=r(a(3426)),s=r(a(2735)),o=a(5601);class d extends i.default{constructor(){super(["login-popup"],"login-popup__container"),this.titleEl=s.default("h3",["login-popup__title"]),this.form=new n.default(["login-popup__form"],this),this.render()}render(){this.titleEl.textContent="Login",this.containerEl.append(this.titleEl,this.form.el)}checkClickIsOutside(t){t.target===this.el&&document.body.classList.remove(o.LOGIN_POPUP_SHOW_CLASS)}}e.default=d},4584:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(8796);const n=i(a(8194)),s=i(a(8390)),o=i(a(6311)),d=i(a(2735)),l=i(a(3242)),c=a(5601),u=i(a(2003));class h extends n.default{constructor(){super("div",["nav-drawer"]),this.navItems=[],this.navEl=d.default("nav",["nav-drawer__nav"]),this.containerEl=d.default("ul",["nav-drawer__container"]),this.login=new o.default({classes:["nav-drawer__login"],text:c.LOGIN_BTN_TEXT}),this.wrapperEl=d.default("div",["nav-drawer__wrapper"]),this.attachListeners(),this.render()}render(){return r(this,void 0,void 0,(function*(){this.clear(),(yield u.default(c.SERVER_API_NAV_ITEMS_URL)).forEach((t=>this.addNavItem(t))),this.el.append(this.navEl,this.wrapperEl),this.navEl.append(this.containerEl,this.login.el)}))}addNavItem({url:t,text:e}){const a=d.default("li",["nav-drawer__item"]),r=new s.default({classes:["nav-drawer__link"],url:t,text:e});r.attachHandler((e=>{null==e||e.preventDefault(),h.handleNavItem(t)})),this.containerEl.append(a),a.append(r.el),this.navItems.push(a)}static handleNavItem(t){document.body.classList.remove(c.HAMB_MENU_OPEN_CLASS),l.default.navigate(t)}attachListeners(){this.wrapperEl.addEventListener("click",(t=>this.checkClickIsOutside(t))),this.login.el.addEventListener("click",(()=>{document.body.classList.remove(c.HAMB_MENU_OPEN_CLASS),document.body.classList.add(c.LOGIN_POPUP_SHOW_CLASS)}))}checkClickIsOutside(t){t.target===this.wrapperEl&&document.body.classList.remove(c.HAMB_MENU_OPEN_CLASS)}clear(){this.containerEl.innerHTML="",this.navItems=[]}}const _=new h;e.default=_},4362:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(1107);const i=r(a(8194)),n=r(a(6311)),s=r(a(2735));class o extends i.default{constructor(t=[],e){super("div",t.concat(["new-card"])),this.titleEl=s.default("h4",["new-card__title"]),this.btnAdd=new n.default({classes:["new-card__btn-add"]}),this.render(e)}render(t){this.titleEl.textContent=t,this.el.append(this.titleEl,this.btnAdd.el)}}e.default=o},7546:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(744);const i=r(a(8194)),n=r(a(2735)),s=r(a(9840)),o=a(5601);class d extends i.default{constructor(){super("label",["state-switcher"]),this.checkboxEl=n.default("input",["state-switcher__checkbox"]),this.panelEl=n.default("span",["switcher__panel"]),this.handleEl=n.default("span",["switcher__handle"]),this.attachListener(),this.render()}render(){this.checkboxEl.setAttribute("type","checkbox"),this.checkboxEl.setAttribute("checked",""),this.panelEl.dataset.on=o.TRAIN,this.panelEl.dataset.off=o.PLAY,this.el.append(this.checkboxEl,this.panelEl,this.handleEl)}attachListener(){this.checkboxEl.addEventListener("change",(()=>this.changeAppState()))}changeAppState(){this.checkboxEl.checked?s.default.dispatch({type:o.GAME_MODE_CHANGE,gameMode:o.TRAIN}):s.default.dispatch({type:o.GAME_MODE_CHANGE,gameMode:o.PLAY})}}const l=new d;e.default=l},8397:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(2183);const i=r(a(5700)),n=r(a(6311)),s=r(a(2735)),o=r(a(3242)),d=r(a(9840)),l=a(5601);class c{constructor(t){this.rootEl=t,this.containerEl=s.default("div",["statistic-page__container"]),this.btnRepeat=new n.default({classes:["statistic-page__btn","statistic-page__repeat"],text:l.BTN_REPEAT_DIFFICULT_WORDS_TEXT,title:l.DIFFICULT_WORDS_ACCURACY_TEXT}),this.btnReset=new n.default({classes:["statistic-page__btn","statistic-page__reset"],text:l.BTN_RESET_STATISTIC_TEXT}),this.statisticTable=new i.default,this.attachListeners(),this.build()}attachListeners(){this.btnReset.attachHandler((()=>this.reset())),this.btnRepeat.attachHandler((()=>this.handleDifficultWords()))}build(){this.containerEl.append(this.statisticTable.el)}render(){this.statisticTable.update(),this.rootEl.append(this.btnRepeat.el,this.btnReset.el,this.containerEl)}reset(){localStorage.clear(),this.statisticTable.update()}handleDifficultWords(){o.default.navigate(`category/${l.STATISTIC_PAGE_URL}`);const t=l.STATISTIC_TABLE_TITLES.length-1;this.statisticTable.statisticTableBody.handleSort(t,"ascend");const e=this.statisticTable.statisticTableBody.rows,a=c.filterDifficultWords(e,t),r=c.structureDifficultWords(a);d.default.dispatch({type:l.APP_DIFFICULT_CATEGORY,difficultWords:r})}static filterDifficultWords(t,e){let a=l.MAX_DIFFICULT_WORDS;return t.filter((t=>{const r={hit:t.cells[e].el.textContent,wrong:t.cells[e-1].el.textContent};return!!(Number(r.hit)<l.DIFFICULT_WORDS_ACCURACY_LIMIT&&"0"!==r.wrong&&a)&&(a--,!0)}))}static structureDifficultWords(t){return t.map((t=>({category:t.cells[0].el.textContent||"",word:t.cells[1].el.textContent||""})))}}e.default=c},9306:function(t,e,a){var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(3833);const n=i(a(8194)),s=i(a(3792)),o=i(a(2003)),d=i(a(2012)),l=a(5601);class c extends n.default{constructor(){super("tbody",["statistic-table-body"]),this.rows=[]}render(){return r(this,void 0,void 0,(function*(){this.clear();const t=yield o.default(l.SERVER_API_CATEGORIES_URL),e=yield o.default(l.SERVER_API_WORDS_URL);t.forEach(((t,a)=>{e[a].forEach((e=>{const a=d.default(t.handle,e.word),r=c.getPercentCorrectAnswers(a),i=c.uniteTableRowValues(t,e,a,r),n=new s.default(i,"td");this.rows.push(n),this.el.append(n.el)}))}))}))}static getPercentCorrectAnswers(t){return t.correct?Math.round(t.correct/(t.correct+t.wrong)*l.PERCENT_100):0}static uniteTableRowValues(t,e,a,r){return{category:t.title,word:e.word,translation:e.translation,trained:a.trained,correct:a.correct,wrong:a.wrong,percentCorrect:r}}clear(){this.rows=[],this.el.innerHTML=""}handleSort(t,e){const a=this.rows[0].cells[t].el.textContent;if(!a)return;const r=Number.isNaN(+a)?"str":"num";this.rows.sort(((a,i)=>c.sortRows(a,i,e,t,r))),this.updateEl()}static sortRows(t,e,a,r,i){const n={a:t.cells[r].el.textContent,b:e.cells[r].el.textContent};return n.a&&n.b?"str"===i?"descend"===a?n.a.localeCompare(n.b):n.b.localeCompare(n.a):"descend"===a?+n.b-+n.a:+n.a-+n.b:0}updateEl(){this.el.innerHTML="",this.rows.forEach((t=>this.el.append(t.el)))}}e.default=c},1971:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(6083);const i=r(a(8194));class n extends i.default{constructor(t,e){super(t,["statistic-table-cell",`statistic-table-cell_view_${t}`]),this.render(e)}render(t){this.el.textContent=t}}e.default=n},6281:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(8141);const i=r(a(8194)),n=r(a(3792)),s=a(5601);class o extends i.default{constructor(){super("thead",["statistic-table-head"]),this.statisticTableRow=new n.default(s.STATISTIC_TABLE_TITLES,"th"),this.render()}render(){this.el.append(this.statisticTableRow.el)}handleSort(t){this.hideSort(t),o.toggleSort(t)}static toggleSort(t){t.classList.contains(s.STATISTIC_CELL_SORT_CLASSES.descend)?(t.classList.remove(s.STATISTIC_CELL_SORT_CLASSES.descend),t.classList.add(s.STATISTIC_CELL_SORT_CLASSES.ascend)):t.classList.contains(s.STATISTIC_CELL_SORT_CLASSES.ascend)?(t.classList.remove(s.STATISTIC_CELL_SORT_CLASSES.ascend),t.classList.add(s.STATISTIC_CELL_SORT_CLASSES.descend)):t.classList.add(s.STATISTIC_CELL_SORT_CLASSES.descend)}hideSort(t){this.statisticTableRow.cells.forEach((e=>{e.el!==t&&e.el.classList.remove(s.STATISTIC_CELL_SORT_CLASSES.descend,s.STATISTIC_CELL_SORT_CLASSES.ascend)}))}}e.default=o},3792:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(7081);const i=r(a(8194)),n=r(a(1971));class s extends i.default{constructor(t,e){super("tr",["statistic-table-row"]),this.cells=[],this.render(t,e)}render(t,e){Object.values(t).forEach((t=>this.addCell(e,t)))}addCell(t,e){const a=new n.default(t,e);this.cells.push(a),this.el.append(a.el)}}e.default=s},5700:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(173);const i=r(a(8194)),n=r(a(6281)),s=r(a(9306)),o=r(a(3479)),d=a(5601);class l extends i.default{constructor(){super("table",["statistic-table"]),this.statisticTableHead=new n.default,this.statisticTableBody=new s.default,this.attachListener(),this.render()}render(){this.el.append(this.statisticTableHead.el,this.statisticTableBody.el)}attachListener(){this.el.addEventListener("click",(t=>this.sortData(t)))}sortData(t){const e=o.default(t.target,"th",this.statisticTableHead.el);if(e){this.statisticTableHead.handleSort(e);const t=this.statisticTableHead.statisticTableRow.cells.findIndex((t=>t.el===e)),a=e.classList.contains(d.STATISTIC_CELL_SORT_CLASSES.descend)?"descend":"ascend";this.statisticTableBody.handleSort(t,a)}}update(){this.statisticTableBody.render(),this.statisticTableHead.hideSort()}}e.default=l},6300:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(1731);const i=r(a(8194)),n=r(a(2735)),s=r(a(4680)),o=a(5601);class d extends i.default{constructor(t,e){super("div",["word-card"]),this.isFlipped=!1,this.containerEl=n.default("div",["word-card__container"]),this.frontEl=n.default("div",["word-card__front"]),this.backEl=n.default("div",["word-card__back"]),this.wordEnEl=n.default("div",["word-card__header","word-card__header_contain"]),this.wordRuEl=n.default("div",["word-card__header"]),this.rotateEl=n.default("span",["word-card__rotate"]),this.audioEl=new Audio(t.audio),this.render(t,e)}render(t,e){const a=`background-image: url("${t.image}")`;this.frontEl.setAttribute("style",a),this.backEl.setAttribute("style",a),this.frontEl.dataset.category=e,this.frontEl.dataset.audio=t.audio,this.wordEnEl.textContent=t.word,this.wordRuEl.textContent=t.translation,this.el.append(this.containerEl),this.containerEl.append(this.frontEl,this.backEl),this.frontEl.append(this.wordEnEl),this.wordEnEl.append(this.rotateEl),this.backEl.append(this.wordRuEl)}trainCard(){this.flipToBack(),this.waitGoOutFromCard()}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(t=!1){return new Promise((e=>{this.el.classList.toggle(o.CARD_FLIP_CLASS,t),s.default(o.CARD_FLIP_DURATION).then(e)}))}waitGoOutFromCard(){this.el.addEventListener("mouseleave",(()=>{this.flipToFront()}),{once:!0})}playAudio(){this.audioEl.play()}disableCard(){this.el.classList.add("word-card_disabled")}}e.default=d},5601:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SERVER_API_NAV_ITEMS_URL=e.SERVER_API_WORDS_URL=e.SERVER_API_CATEGORY_URL=e.SERVER_API_CATEGORIES_URL=e.SERVER_API_CATEGORY_IMAGE_URL=e.SERVER_URL=e.LOGIN_FORM_SUBMIT_BTN=e.LOGIN_FORM_CANCEL_BTN=e.LOGOUT_BTN_TEXT=e.LOGIN_BTN_TEXT=e.LOGIN_FORM_PASSWORD_FIELD=e.LOGIN_FORM_USERNAME_FIELD=e.LOGIN_POPUP_SHOW_CLASS=e.STATISTIC_PAGE_URL=e.EMPTY_STATISTICAL_DATA=e.STATISTIC_TABLE_TITLES=e.ADMIN_NAV_ITEMS=e.GAME_END_SPLASH_SCREEN=e.GAME_CARDS_SOUND_NOTICES=e.STATISTIC_CELL_SORT_CLASSES=e.DIFFICULT_WORDS_ACCURACY_LIMIT=e.DIFFICULT_WORDS_ACCURACY_TEXT=e.MAX_DIFFICULT_WORDS=e.BTN_RESET_STATISTIC_TEXT=e.BTN_REPEAT_DIFFICULT_WORDS_TEXT=e.BTN_START_GAME_TEXT=e.CARD_FLIP_DURATION=e.CARD_FLIP_CLASS=e.NAV_ITEM_ACTIVE_CLASS=e.HAMB_MENU_OPEN_CLASS=e.PERCENT_100=e.YEAR_CREATE_APP=e.RSSCHOOL_JS_LINK=e.MY_GITHUB=e.APP_PAGES=e.PLAY=e.TRAIN=e.INITIAL_STATE=e.APP_DIFFICULT_CATEGORY=e.GAME_CARD_ERROR=e.GAME_CARD_CORRECT=e.GAME_END=e.GAME_START=e.GAME_MODE_CHANGE=e.APP_PAGE_CHANGE=e.APP_AUTHORIZATION=void 0,e.APP_AUTHORIZATION="app/authorization",e.APP_PAGE_CHANGE="app/pageChange",e.GAME_MODE_CHANGE="game/modeChange",e.GAME_START="game/start",e.GAME_END="game/end",e.GAME_CARD_CORRECT="game/cardCorrect",e.GAME_CARD_ERROR="game/cardError",e.APP_DIFFICULT_CATEGORY="app/difficultCategory",e.INITIAL_STATE={isAdmin:!1,isLogInOutDone:!1,currentPage:"",gameMode:"train",category:"",currentCardIndex:0,isPageChange:!1,isGameStart:!1,isEndGame:!1,randomCards:[],isCardCorrect:!1,isCardError:!1,countErrors:0,difficultWords:[]},e.TRAIN="train",e.PLAY="play",e.APP_PAGES={home:"",category:"category",statistic:"statistic",adminHome:"admin",adminCategory:"admin/category"},e.MY_GITHUB={url:"https://github.com/WFZ1",name:"WFZ1"},e.RSSCHOOL_JS_LINK="https://rs.school/js/",e.YEAR_CREATE_APP="'21",e.PERCENT_100=100,e.HAMB_MENU_OPEN_CLASS="hamburger-menu-opened",e.NAV_ITEM_ACTIVE_CLASS="nav-drawer__link_active",e.CARD_FLIP_CLASS="word-card_flipped",e.CARD_FLIP_DURATION=250,e.BTN_START_GAME_TEXT="Start game",e.BTN_REPEAT_DIFFICULT_WORDS_TEXT="Repeat difficult words",e.BTN_RESET_STATISTIC_TEXT="Reset",e.MAX_DIFFICULT_WORDS=8,e.DIFFICULT_WORDS_ACCURACY_TEXT="Words with < 45% accuracy",e.DIFFICULT_WORDS_ACCURACY_LIMIT=45,e.STATISTIC_CELL_SORT_CLASSES={descend:"statistic-table-cell_sort_descend",ascend:"statistic-table-cell_sort_ascend"},e.GAME_CARDS_SOUND_NOTICES={correct:{folder:"notices",audio:"correct.mp3"},error:{folder:"notices",audio:"error.mp3"}},e.GAME_END_SPLASH_SCREEN={success:{text:"Congratulations! You win!",image:"assets/images/game-end-state/success.jpg",audio:"assets/audio/notices/success.mp3"},fail:{text:"Errors",image:"assets/images/game-end-state/failure.jpg",audio:"assets/audio/notices/failure.mp3"}},e.ADMIN_NAV_ITEMS=[{text:"Categories",url:"admin/categories"},{text:"Words",url:"admin/words"}],e.STATISTIC_TABLE_TITLES=["Category","Word","Translation","Trained","Correct","Wrong","Hit %"],e.EMPTY_STATISTICAL_DATA={trained:0,correct:0,wrong:0},e.STATISTIC_PAGE_URL="repeat-difficult-words",e.LOGIN_POPUP_SHOW_CLASS="login-popup-show",e.LOGIN_FORM_USERNAME_FIELD={type:"text",name:"username",placeholder:"username",maxlength:"30"},e.LOGIN_FORM_PASSWORD_FIELD={type:"password",name:"password",placeholder:"password",maxlength:"30"},e.LOGIN_BTN_TEXT="Login",e.LOGOUT_BTN_TEXT="Log out",e.LOGIN_FORM_CANCEL_BTN={text:"Cancel",type:"reset"},e.LOGIN_FORM_SUBMIT_BTN={text:"Login",type:"submit"},e.SERVER_URL=window.location.origin.indexOf("localhost")?"http://localhost:7000":window.location.origin,e.SERVER_API_CATEGORY_IMAGE_URL=`${e.SERVER_URL}/api/category-image`,e.SERVER_API_CATEGORIES_URL=`${e.SERVER_URL}/api/categories`,e.SERVER_API_CATEGORY_URL=`${e.SERVER_URL}/api/category`,e.SERVER_API_WORDS_URL=`${e.SERVER_URL}/api/words`,e.SERVER_API_NAV_ITEMS_URL=`${e.SERVER_URL}/api/nav-items`},3607:function(t,e,a){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),a(5373),new(r(a(6752)).default)(document.body).addRoutes()},2735:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t="div",e=[]){const a=document.createElement(t);return a.classList.add(...e),a}},4680:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Promise((e=>{setTimeout(e,t)}))}},1739:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return new Audio(`assets/audio/${t}/${e}`)}},3479:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){const r=t.closest(e);return r&&a.contains(r)?r:0}},2003:function(t,e){var a=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function s(t){try{d(r.next(t))}catch(t){n(t)}}function o(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,o)}d((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a(this,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.json()}))}},2012:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=a(5601);e.default=function(t,e){const a=`${t}__${e}`,i=localStorage.getItem(a);return i?JSON.parse(i):r.EMPTY_STATISTICAL_DATA}},8063:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){let e=t.toLowerCase();return e=e.replace(/\W/g,(t=>" "===t?"-":"")),e}}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,a),n.exports}a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a(3607)})();